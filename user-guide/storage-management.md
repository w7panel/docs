# 存储管理

存储管理用于管理应用的持久化存储和数据卷。

## 存储分区

### 概述

存储分区为应用提供持久化存储能力，即使应用重启数据也不会丢失。

### 查看存储分区

1. 进入「存储管理」→「存储分区」
2. 查看所有存储分区列表

列表显示：
- 分区名称
- 存储类型
- 容量（已用/总量）
- 访问模式
- 状态

### 存储类型

| 类型 | 说明 | 适用场景 |
|------|------|---------|
| Local | 本地存储 | 单节点测试 |
| NFS | 网络文件系统 | 多节点共享 |
| Longhorn | 分布式存储 | 生产环境 |

### 访问模式

| 模式 | 缩写 | 说明 |
|------|------|------|
| ReadWriteOnce | RWO | 单节点读写 |
| ReadOnlyMany | ROX | 多节点只读 |
| ReadWriteMany | RWX | 多节点读写 |

### 创建存储分区

1. 点击「新建」按钮
2. 填写配置:

| 字段 | 说明 |
|------|------|
| 名称 | 存储分区名称 |
| 存储类 | 选择存储类型 |
| 容量 | 设置存储大小（如: 10Gi） |
| 访问模式 | 选择访问模式 |

3. 点击「确定」

### 使用存储分区

在应用配置中挂载存储分区：

```yaml
volumes:
  - name: data
    persistentVolumeClaim:
      claimName: my-storage
      
volumeMounts:
  - name: data
    mountPath: /app/data
```

## 存储设备

### 查看存储设备

1. 进入「存储管理」→「存储设备」
2. 查看节点存储信息

显示内容：
- 节点名称
- 磁盘总量
- 已用空间
- 可用空间
- 使用率

### 存储监控

存储监控图表显示：
- 磁盘 I/O 速度
- 读写延迟
- 存储使用趋势

## 数据备份

### 手动备份

1. 进入应用「文件管理」
2. 选择要备份的目录
3. 点击「压缩」打包下载

### 定时备份

使用「计划任务」配置定时备份：
1. 创建计划任务
2. 编写备份脚本
3. 设置执行时间

示例备份脚本：
```bash
#!/bin/bash
tar -czf /backup/data_$(date +%Y%m%d).tar.gz /app/data
```

## 存储扩容

### 扩容存储分区

1. 进入「存储分区」
2. 点击目标分区的「扩容」
3. 输入新的容量
4. 点击「确定」

> ⚠️ 扩容操作可能导致短暂的服务中断

## 存储快照

### 创建快照

1. 选择存储分区
2. 点击「快照」
3. 输入快照名称
4. 点击「确定」

### 恢复快照

1. 选择快照
2. 点击「恢复」
3. 确认恢复操作

### 删除快照

1. 选择要删除的快照
2. 点击「删除」
3. 确认删除

## 常见问题

### Q: 存储分区状态显示 Pending？
A: 检查存储类配置和节点存储空间是否足够。

### Q: 应用无法写入存储？
A: 检查挂载路径和文件权限。

### Q: 如何迁移数据到新存储？
A: 
1. 在新存储创建分区
2. 通过文件管理复制数据
3. 更新应用配置使用新存储

### Q: 存储空间不足怎么办？
A: 
1. 清理无用文件
2. 扩容存储分区
3. 联系管理员添加存储节点
