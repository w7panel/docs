# 集群管理

集群管理模块提供对 Kubernetes 集群的完整管理能力。

## 概览仪表盘

### 访问概览

登录后默认进入概览页面，显示集群整体状态。

### 仪表盘信息

| 信息项 | 说明 |
|--------|------|
| 集群版本 | Kubernetes 版本号 |
| 创建时间 | 集群创建时间 |
| 集群地址 | 集群 API 地址 |
| 绑定域名 | 面板访问域名 |
| 集群模式 | 单机/高可用模式 |

### 资源监控

- **CPU 分配率**: 已分配 CPU 核数 / 总核数
- **内存分配率**: 已分配内存 / 总内存
- **硬盘分配率**: 已使用存储 / 总存储
- **GPU 分配率**: vGPU 使用情况（如适用）

### 快捷入口

- **集群终端**: 点击进入 Web 终端
- **节点**: 查看节点数量
- **应用**: 查看应用数量
- **域名地址**: 查看域名数量
- **存储分区**: 查看存储分区数量

## 节点管理

### 查看节点列表

1. 进入「集群管理」→「节点管理」
2. 查看所有节点信息

列表显示：
| 列名 | 说明 |
|------|------|
| 节点名称 | 节点主机名 |
| IP | 内网 IP 和公网 IP |
| podCIDR | Pod 网段 |
| 环境 | 操作系统和容器运行时 |
| CPU/内存 | 已分配 / 总量 |
| 封锁状态 | 是否封锁节点 |

### 注册新节点

1. 点击「注册节点」按钮
2. 按照提示在目标机器执行注册命令
3. 等待节点加入集群

### 修改镜像源

1. 点击「修改镜像源」按钮
2. 选择或输入镜像源地址
3. 点击「确定」保存

> 💡 使用国内镜像源可加速镜像拉取

### 内存优化

1. 点击「内存优化」按钮
2. 系统自动清理缓存和优化内存
3. 查看优化结果

### 节点操作

| 操作 | 说明 |
|------|------|
| 封锁 | 阻止新 Pod 调度到该节点 |
| 驱逐 | 将节点上的 Pod 迁移到其他节点 |
| 删除 | 从集群中移除节点 |

### 查看节点详情

1. 点击节点名称
2. 查看详细信息：
   - 节点标签
   - 污点配置
   - 资源分配
   - 运行状态

## 资源对象浏览器

### 访问资源浏览器

1. 进入「集群管理」→「资源对象浏览器」
2. 左侧显示 API 分组列表

### 浏览资源

1. 点击 API 分组展开资源类型
2. 选择资源类型
3. 右侧显示资源列表

### 常用资源

| API 分组 | 资源类型 | 说明 |
|---------|---------|------|
| core | Pods | 容器组 |
| core | Services | 服务 |
| core | ConfigMaps | 配置字典 |
| core | Secrets | 密钥 |
| apps | Deployments | 部署 |
| apps | StatefulSets | 有状态部署 |
| networking.k8s.io | Ingresses | 入口规则 |

### 资源操作

- **查看详情**: 点击资源名称
- **编辑 YAML**: 点击「编辑」按钮
- **删除**: 点击「删除」按钮

> ⚠️ 删除操作不可恢复，请谨慎操作

## 集群终端

### 打开终端

1. 点击概览页面的「集群终端」
2. 或进入「集群管理」→「集群终端」

### 使用终端

终端提供完整的 kubectl 命令支持：

```bash
# 查看节点
kubectl get nodes

# 查看 Pod
kubectl get pods -A

# 查看服务
kubectl get svc -A

# 查看日志
kubectl logs <pod-name> -n <namespace>
```

### 终端操作

| 快捷键 | 功能 |
|--------|------|
| Ctrl+C | 终止当前命令 |
| Ctrl+L | 清屏 |
| Tab | 自动补全 |

> 💡 终端会话默认 30 分钟无操作自动断开

## 集群信息

### 查看集群信息

1. 点击「集群信息」按钮
2. 查看详细配置

### 集群配置

| 配置项 | 说明 |
|--------|------|
| 集群名称 | 集群标识 |
| API Server | 集群 API 地址 |
| 网络插件 | 使用的网络方案 |
| 存储插件 | 使用的存储方案 |
| 版本信息 | 各组件版本 |

### 修改配置

部分配置支持在线修改：
1. 点击「修改」按钮
2. 更新配置项
3. 点击「保存」

## 常见问题

### Q: 节点显示 NotReady？
A: 
1. 检查节点网络连接
2. 检查容器运行时状态
3. 查看节点日志排查问题

### Q: 资源对象无法删除？
A: 
1. 检查是否有依赖资源
2. 检查资源是否有 Finalizer
3. 强制删除：`kubectl delete <resource> <name> --force`

### Q: 集群终端无法连接？
A: 
1. 检查网络连接
2. 刷新页面重试
3. 检查后端服务状态
