# 域名管理

域名管理用于配置应用的访问入口和 HTTPS 证书。

## 域名列表

### 查看域名

1. 进入应用详情
2. 点击「域名管理」
3. 查看已配置的域名

列表显示：
- 域名地址
- 协议类型（HTTP/HTTPS）
- 证书状态
- 绑定时间

## 添加域名

### 基本配置

1. 点击「添加域名」
2. 输入域名地址
3. 配置选项:

| 选项 | 说明 |
|------|------|
| 域名 | 如: example.com 或 app.example.com |
| 启用HTTPS | 是否使用 SSL 证书 |
| 证书类型 | 自动申请 / 手动上传 |

4. 点击「确定」

### DNS 配置

添加域名后，需要在 DNS 服务商处配置解析：

| 记录类型 | 名称 | 值 |
|---------|------|-----|
| A | @ | 服务器IP |
| A | www | 服务器IP |
| CNAME | app | 域名地址 |

## HTTPS 证书

### 自动申请（Let's Encrypt）

1. 添加域名时勾选「启用HTTPS」
2. 选择「自动申请」
3. 确保域名已正确解析
4. 系统自动申请并配置证书

> ⚠️ 证书有效期 90 天，系统会自动续期

### 手动上传证书

1. 添加域名时选择「手动上传」
2. 上传证书文件:

| 文件 | 说明 |
|------|------|
| 证书文件 | .crt 或 .pem 格式 |
| 私钥文件 | .key 格式 |

3. 点击「确定」

### 证书格式

**Nginx 格式:**
```
-----BEGIN CERTIFICATE-----
证书内容
-----END CERTIFICATE-----
```

**私钥格式:**
```
-----BEGIN PRIVATE KEY-----
私钥内容
-----END PRIVATE KEY-----
```

## 路径配置

### 配置路径规则

1. 点击域名的「配置」
2. 添加路径规则:

| 路径 | 目标 | 说明 |
|------|------|------|
| / | 应用:8080 | 默认访问 |
| /api | 应用:3000 | API路径 |
| /static | 应用:80 | 静态资源 |

3. 点击「保存」

### 路径重写

支持正则表达式重写 URL：
- 原路径: `/api/v1/(.*)`
- 目标路径: `/api/$1`

## 高级配置

### 负载均衡

配置多个后端实现负载均衡：
```
后端地址:
  - app-1:8080
  - app-2:8080
  - app-3:8080
```

### 超时设置

| 配置项 | 默认值 | 说明 |
|--------|--------|------|
| 连接超时 | 60s | 建立连接超时 |
| 读取超时 | 60s | 读取响应超时 |
| 发送超时 | 60s | 发送请求超时 |

### 请求限制

| 配置项 | 说明 |
|--------|------|
| 最大请求体 | 限制上传文件大小 |
| 请求频率 | 限制每秒请求数 |

## 删除域名

1. 点击域名的「删除」
2. 确认删除

> ⚠️ 删除域名会同时删除 HTTPS 证书配置

## 域名绑定

### 绑定到应用

一个域名只能绑定一个应用：
1. 在应用详情中添加域名
2. 域名自动绑定到该应用

### 解绑域名

1. 在应用域名列表中删除域名
2. 域名自动解绑

## 常见问题

### Q: 域名无法访问？
A: 
1. 检查 DNS 解析是否正确
2. 检查应用是否正常运行
3. 检查防火墙端口是否开放

### Q: HTTPS 证书申请失败？
A:
1. 确认域名已正确解析到服务器
2. 检查 80 端口是否可访问
3. 查看证书申请日志

### Q: 如何配置泛域名？
A:
泛域名证书需要手动上传，Let's Encrypt 不支持自动申请。

### Q: 证书即将过期？
A:
自动申请的证书会自动续期，手动上传的证书需要手动更新。

### Q: 如何强制 HTTPS？
A:
域名配置中启用「强制 HTTPS」选项，HTTP 请求会自动跳转到 HTTPS。
